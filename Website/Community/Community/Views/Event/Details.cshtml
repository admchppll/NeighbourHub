@model Community.Models.Event
@using Community.Helpers
@using Microsoft.AspNet.Identity;
@{
    ViewBag.Title = "Details";
    ViewBag.SocialImage = Model.PictureURL;
}
@Html.AntiForgeryToken()
<div class="col-xs-12 event-links">
    @if (VolunteerHelper.isHost(User.Identity.GetUserId(), Model.ID))
    {
        Html.ActionLink("Edit", "Edit", new { id = Model.ID });
    }
    <!-- Need to find better way to do this due to search functionality-->
    @Html.ActionLink("Back to List", "Index")
</div>
<div class="col-xs-12 col-md-7">
    <div class="col-xs-12">
        <h2>@Html.DisplayFor(model => model.Title)</h2>
    </div>
    <div class="col-xs-12">
        <div id="volunteerInfo" class="row">
            <div class="col-xs-12 col-sm-6">
                <b>Volunteers Needed:</b> @Html.DisplayFor(model => model.VolunteerQuantity)
            </div>
            <div class="col-xs-12 col-sm-6">
                <b>Points Per Volunteer:</b> @VolunteerHelper.getVolunteerPointValue(Model.ID).ToString()
            </div>
        </div>
        <p id="longDescription">
            @Html.Raw(Model.LongDescription)
        </p>
        @if (Model.PictureURL != null && Model.PictureURL != "")
        {
            <div class="col-xs-12">
                <img src="@Url.Content(Model.PictureURL)" class="img-responsive" />
            </div>
        }
    </div>
    <div class="col-xs-12">
        @if (VolunteerHelper.isHost(User.Identity.GetUserId(), Model.ID))
        {
            Html.RenderAction("Volunteers", "Volunteer", new { eventId = Model.ID });
        }
    </div>
</div>
<div id="eventSidebar" class="col-xs-12 col-md-5">
    @if (VolunteerHelper.isHost(User.Identity.GetUserId(), Model.ID) == false
        && VolunteerHelper.isVolunteer(User.Identity.GetUserId(), Model.ID) == false
        && VolunteerHelper.isWithdrawn(User.Identity.GetUserId(), Model.ID) == false
        && User.Identity.IsAuthenticated)
    {
    <div class="col-xs-12">
        <div class="row">
            @if (VolunteerHelper.isVolunteer(User.Identity.GetUserId(), Model.ID) == false)
            {
                <button id="volunteerBtn" href="javascript:void();" onclick="volunteer(@Html.Raw(Model.ID))" class="btn btn-primary">Volunteer</button>
            }
            else if (VolunteerHelper.isWithdrawn(User.Identity.GetUserId(), Model.ID) == false)
            {
                <button id="withdrawBtn" href="javascript:void();" onclick="withdraw(@Html.Raw(Model.ID))" class="btn btn-warning">Withdraw</button>
            }
        </div>
        <div class="row">
            <div class="col-xs-12 alert hidden" id="volunteerMessage">
                <strong id="volunteerMsgTitle"></strong>
                <span id="volunteerMsgContent"></span>
            </div>
        </div>
    </div>
    }

    <div class="col-xs-12">
        <h3>Date Information</h3>
        <div class="col-xs-12">
            <p>
                @Model.Date.ToString("dddd d MMMM yyyy")
                <br />
                @{DateTime time = DateTime.Parse(Model.Time.ToString());}
                @time.ToString("h:mm tt")
                <br />
                @Html.DisplayFor(model => model.Length) Hours
            </p>
        </div>
        <!--<div class="col-xs-12">
            <h4>Day Preference</h4>
            <table id="alternateDateTable" class="table">
                <tr>
                    <th></th>
                    <th>Day 1</th>
                    <th>Day 2</th>
                    <th>Day 3</th>
                    <th>Day 4</th>
                    <th>Day 5</th>
                    <th>Day 6</th>
                    <th>Day 7</th>
                </tr>
                <tr>
                    <th>AM</th>
                    <td class="@(Model.AM1 ? "bg-success": "")"></td>
                    <td class="@(Model.AM2 ? "bg-success": "")"></td>
                    <td class="@(Model.AM3 ? "bg-success": "")"></td>
                    <td class="@(Model.AM4 ? "bg-success": "")"></td>
                    <td class="@(Model.AM5 ? "bg-success": "")"></td>
                    <td class="@(Model.AM6 ? "bg-success": "")"></td>
                    <td class="@(Model.AM7 ? "bg-success": "")"></td>
                </tr>
                <tr>
                    <th>PM</th>
                    <td class="@(Model.PM1 ? "bg-success": "")"></td>
                    <td class="@(Model.PM2 ? "bg-success": "")"></td>
                    <td class="@(Model.PM3 ? "bg-success": "")"></td>
                    <td class="@(Model.PM4 ? "bg-success": "")"></td>
                    <td class="@(Model.PM5 ? "bg-success": "")"></td>
                    <td class="@(Model.PM6 ? "bg-success": "")"></td>
                    <td class="@(Model.PM7 ? "bg-success": "")"></td>
                </tr>
            </table>
        </div>
        @if (Model.DateInfo != "")
        {
        <div class="col-xs-12">
            <h4>Extra Information</h4>
            <p>@Html.DisplayFor(model => model.DateInfo)</p>
        </div>
        }-->
    </div>
    <div class="col-xs-12">
        @{
            Html.RenderAction("Display", "EventTag", new { eventId = Model.ID });
        }
    </div>
</div>
@Scripts.Render("~/Scripts/Volunteer.js")
